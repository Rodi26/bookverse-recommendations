=== COMPREHENSIVE E2E TEST REPORT ===
Date: Sat Sep 13 11:41:28 IDT 2025

=== LIBRARY IMPORT TESTS ===
‚úÖ Auth module imports: SUCCESS
‚úÖ Config module imports: SUCCESS
‚úÖ API module imports: SUCCESS
‚úÖ Database module imports: SUCCESS
‚úÖ Utils module imports: SUCCESS

=== BASIC FUNCTIONALITY TESTS ===
‚úÖ BaseConfig creation: SUCCESS - service_name: BookVerse Service
‚úÖ API response creation: SUCCESS - success: True
‚úÖ Email validation: SUCCESS - result: True

=== DEMO APPLICATION ENDPOINT TESTS ===
‚úÖ Demo app startup: SUCCESS (PID: 64270)
‚úÖ Health check (/health): SUCCESS (200)
‚úÖ Service info (/info): SUCCESS (200)
‚úÖ Demo information (/demo/info): SUCCESS (200)
‚úÖ Demo summary (/demo/summary): SUCCESS (200)
‚úÖ Public auth endpoint (/demo/auth/public): SUCCESS (200)
‚ùå Optional auth endpoint (/demo/auth/optional): FAILED (Code: 401)
‚úÖ Current configuration (/demo/config/current): SUCCESS (200)
‚úÖ Logging demonstration (/demo/logging/test): SUCCESS (200)
‚úÖ Validation demonstration (/demo/validation/test): SUCCESS (200)
‚úÖ Pagination demonstration (/demo/pagination/items): SUCCESS (200)
‚úÖ Middleware demonstration (/demo/middleware/demo): SUCCESS (200)
‚úÖ Response patterns (/demo/responses/demo): SUCCESS (200)
‚úÖ Detailed health check (/demo/health/detailed): SUCCESS (200)
‚úÖ Protected auth endpoint: SUCCESS (401 - correctly requires auth)

=== APPLICATION LOGS AND ERRORS ===
/Users/yonatanp/Library/Python/3.9/lib/python/site-packages/urllib3/__init__.py:35: NotOpenSSLWarning: urllib3 v2 only supports OpenSSL 1.1.1+, currently the 'ssl' module is compiled with 'LibreSSL 2.8.3'. See: https://github.com/urllib3/urllib3/issues/3020
  warnings.warn(
[bookverse-core-demo] 2025-09-13 11:41:30,399 - root - INFO - ‚úÖ Logging configured for bookverse-core-demo (level: INFO)
[bookverse-core-demo] 2025-09-13 11:41:30,400 - bookverse_core.api.app_factory - INFO - ‚úÖ CORS middleware enabled
[bookverse-core-demo] 2025-09-13 11:41:30,400 - bookverse_core.api.app_factory - INFO - ‚úÖ JWT authentication middleware enabled
[bookverse-core-demo] 2025-09-13 11:41:30,401 - bookverse_core.api.app_factory - INFO - ‚úÖ FastAPI application created: BookVerse Core Demo Service v0.1.0
[bookverse-core-demo] 2025-09-13 11:41:30,454 - __main__ - INFO - üöÄ BookVerse Core Demo Service v0.1.0 starting up on port 8000
INFO:     Will watch for changes in these directories: ['/Users/yonatanp/playground/AppTrust-BookVerse/bookverse-demo/bookverse-core']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [64270] using WatchFiles
/Users/yonatanp/Library/Python/3.9/lib/python/site-packages/urllib3/__init__.py:35: NotOpenSSLWarning: urllib3 v2 only supports OpenSSL 1.1.1+, currently the 'ssl' module is compiled with 'LibreSSL 2.8.3'. See: https://github.com/urllib3/urllib3/issues/3020
  warnings.warn(
[bookverse-core-demo] 2025-09-13 11:41:31,143 - root - INFO - ‚úÖ Logging configured for bookverse-core-demo (level: INFO)
[bookverse-core-demo] 2025-09-13 11:41:31,143 - bookverse_core.api.app_factory - INFO - ‚úÖ CORS middleware enabled
[bookverse-core-demo] 2025-09-13 11:41:31,143 - bookverse_core.api.app_factory - INFO - ‚úÖ JWT authentication middleware enabled
[bookverse-core-demo] 2025-09-13 11:41:31,145 - bookverse_core.api.app_factory - INFO - ‚úÖ FastAPI application created: BookVerse Core Demo Service v0.1.0
[bookverse-core-demo] 2025-09-13 11:41:31,226 - root - INFO - ‚úÖ Logging configured for bookverse-core-demo (level: INFO)
[bookverse-core-demo] 2025-09-13 11:41:31,226 - bookverse_core.api.app_factory - INFO - ‚úÖ CORS middleware enabled
[bookverse-core-demo] 2025-09-13 11:41:31,226 - bookverse_core.api.app_factory - INFO - ‚úÖ JWT authentication middleware enabled
[bookverse-core-demo] 2025-09-13 11:41:31,227 - bookverse_core.api.app_factory - INFO - ‚úÖ FastAPI application created: BookVerse Core Demo Service v0.1.0
INFO:     Started server process [64304]
INFO:     Waiting for application startup.
[bookverse-core-demo] 2025-09-13 11:41:31,229 - bookverse_core.api.app_factory - INFO - üöÄ Starting BookVerse Core Demo Service v0.1.0
[bookverse-core-demo] 2025-09-13 11:41:31,229 - bookverse_core.api.app_factory - INFO - üìã Environment: development
[bookverse-core-demo] 2025-09-13 11:41:31,229 - bookverse_core.api.app_factory - INFO - üîê Auth enabled: True
INFO:     Application startup complete.
[bookverse-core-demo] 2025-09-13 11:41:34,807 - bookverse_core.auth.oidc - ERROR - ‚ùå Failed to fetch OIDC configuration: HTTPSConnectionPool(host='dev-auth.bookverse.com', port=443): Max retries exceeded with url: /.well-known/openid_configuration (Caused by NameResolutionError("<urllib3.connection.HTTPSConnection object at 0x123c25040>: Failed to resolve 'dev-auth.bookverse.com' ([Errno 8] nodename nor servname provided, or not known)"))
[bookverse-core-demo] 2025-09-13 11:41:34,807 - bookverse_core.auth.health - ERROR - ‚ùå Authentication connectivity check failed: 503: Authentication service unavailable
INFO:     127.0.0.1:56760 - "GET /health HTTP/1.1" 200 OK
[bookverse-core-demo] 2025-09-13 11:41:34,829 - bookverse_core.api.middleware - INFO - üì• Request: {'request_id': 'unknown', 'method': 'GET', 'url': 'http://localhost:8000/info', 'client_ip': '127.0.0.1', 'user_agent': 'curl/8.7.1'}
[bookverse-core-demo] 2025-09-13 11:41:34,830 - bookverse_core.api.middleware - INFO - üì§ Response: {'request_id': 'unknown', 'status_code': 200, 'duration_ms': 1.17}
INFO:     127.0.0.1:56762 - "GET /info HTTP/1.1" 200 OK
[bookverse-core-demo] 2025-09-13 11:41:34,845 - bookverse_core.api.middleware - INFO - üì• Request: {'request_id': 'unknown', 'method': 'GET', 'url': 'http://localhost:8000/demo/info', 'client_ip': '127.0.0.1', 'user_agent': 'curl/8.7.1'}
[bookverse-core-demo] 2025-09-13 11:41:34,845 - main - INFO - üìã Demo info endpoint accessed
[bookverse-core-demo] 2025-09-13 11:41:34,846 - bookverse_core.api.middleware - INFO - üì§ Response: {'request_id': 'unknown', 'status_code': 200, 'duration_ms': 0.77}
INFO:     127.0.0.1:56764 - "GET /demo/info HTTP/1.1" 200 OK
[bookverse-core-demo] 2025-09-13 11:41:34,848 - watchfiles.main - INFO - 1 change detected
[bookverse-core-demo] 2025-09-13 11:41:34,859 - bookverse_core.api.middleware - INFO - üì• Request: {'request_id': 'unknown', 'method': 'GET', 'url': 'http://localhost:8000/demo/summary', 'client_ip': '127.0.0.1', 'user_agent': 'curl/8.7.1'}
[bookverse-core-demo] 2025-09-13 11:41:34,859 - main - INFO - üìä Demo summary endpoint accessed
[bookverse-core-demo] 2025-09-13 11:41:34,860 - bookverse_core.api.middleware - INFO - üì§ Response: {'request_id': 'unknown', 'status_code': 200, 'duration_ms': 1.07}
INFO:     127.0.0.1:56766 - "GET /demo/summary HTTP/1.1" 200 OK
[bookverse-core-demo] 2025-09-13 11:41:34,876 - bookverse_core.api.middleware - INFO - üì• Request: {'request_id': 'unknown', 'method': 'GET', 'url': 'http://localhost:8000/demo/auth/public', 'client_ip': '127.0.0.1', 'user_agent': 'curl/8.7.1'}
[bookverse-core-demo] 2025-09-13 11:41:34,876 - main - INFO - üåê Public endpoint accessed
[bookverse-core-demo] 2025-09-13 11:41:34,877 - bookverse_core.api.middleware - INFO - üì§ Response: {'request_id': 'unknown', 'status_code': 200, 'duration_ms': 0.74}
INFO:     127.0.0.1:56768 - "GET /demo/auth/public HTTP/1.1" 200 OK
[bookverse-core-demo] 2025-09-13 11:41:34,890 - bookverse_core.api.middleware - INFO - üì• Request: {'request_id': 'unknown', 'method': 'GET', 'url': 'http://localhost:8000/demo/auth/optional', 'client_ip': '127.0.0.1', 'user_agent': 'curl/8.7.1'}
[bookverse-core-demo] 2025-09-13 11:41:34,891 - bookverse_core.api.middleware - WARNING - ‚ö†Ô∏è Response: {'request_id': 'unknown', 'status_code': 401, 'duration_ms': 1.02}
INFO:     127.0.0.1:56770 - "GET /demo/auth/optional HTTP/1.1" 401 Unauthorized
[bookverse-core-demo] 2025-09-13 11:41:34,905 - bookverse_core.api.middleware - INFO - üì• Request: {'request_id': 'unknown', 'method': 'GET', 'url': 'http://localhost:8000/demo/config/current', 'client_ip': '127.0.0.1', 'user_agent': 'curl/8.7.1'}
[bookverse-core-demo] 2025-09-13 11:41:34,906 - main - INFO - ‚öôÔ∏è Configuration endpoint accessed
[bookverse-core-demo] 2025-09-13 11:41:34,906 - bookverse_core.api.middleware - INFO - üì§ Response: {'request_id': 'unknown', 'status_code': 200, 'duration_ms': 1.29}
INFO:     127.0.0.1:56772 - "GET /demo/config/current HTTP/1.1" 200 OK
[bookverse-core-demo] 2025-09-13 11:41:34,920 - bookverse_core.api.middleware - INFO - üì• Request: {'request_id': 'unknown', 'method': 'GET', 'url': 'http://localhost:8000/demo/logging/test', 'client_ip': '127.0.0.1', 'user_agent': 'curl/8.7.1'}
[bookverse-core-demo] 2025-09-13 11:41:34,920 - main - INFO - üìù Logging demo endpoint accessed
[bookverse-core-demo] 2025-09-13 11:41:34,920 - main - INFO - üéØ DEMO: This is a demo-specific log message
[bookverse-core-demo] 2025-09-13 11:41:34,920 - main - INFO - ‚ôªÔ∏è COMMONS: Logging Setup - eliminated 50 lines of duplicate code
[bookverse-core-demo] 2025-09-13 11:41:34,920 - main - WARNING - This is a warning message with emoji ‚ö†Ô∏è
[bookverse-core-demo] 2025-09-13 11:41:34,920 - main - ERROR - ‚ùå ValueError: This is a demo error - don't worry! (Context: Demo error simulation) [ID: demo-request-123]
Traceback (most recent call last):
  File "/Users/yonatanp/playground/AppTrust-BookVerse/bookverse-demo/bookverse-core/app/main.py", line 245, in logging_demo
    raise ValueError("This is a demo error - don't worry!")
ValueError: This is a demo error - don't worry!
[bookverse-core-demo] 2025-09-13 11:41:34,921 - bookverse_core.api.middleware - INFO - üì§ Response: {'request_id': 'unknown', 'status_code': 200, 'duration_ms': 1.56}
INFO:     127.0.0.1:56774 - "GET /demo/logging/test HTTP/1.1" 200 OK
[bookverse-core-demo] 2025-09-13 11:41:34,935 - bookverse_core.api.middleware - INFO - üì• Request: {'request_id': 'unknown', 'method': 'GET', 'url': 'http://localhost:8000/demo/validation/test', 'client_ip': '127.0.0.1', 'user_agent': 'curl/8.7.1'}
[bookverse-core-demo] 2025-09-13 11:41:34,936 - main - INFO - ‚úÖ Validation demo endpoint accessed
[bookverse-core-demo] 2025-09-13 11:41:34,937 - bookverse_core.api.middleware - INFO - üì§ Response: {'request_id': 'unknown', 'status_code': 200, 'duration_ms': 1.27}
INFO:     127.0.0.1:56776 - "GET /demo/validation/test HTTP/1.1" 200 OK
[bookverse-core-demo] 2025-09-13 11:41:34,951 - bookverse_core.api.middleware - INFO - üì• Request: {'request_id': 'unknown', 'method': 'GET', 'url': 'http://localhost:8000/demo/pagination/items', 'client_ip': '127.0.0.1', 'user_agent': 'curl/8.7.1'}
[bookverse-core-demo] 2025-09-13 11:41:34,951 - api.demo_endpoints - INFO - üìÑ Pagination demo: page 1, per_page 20
[bookverse-core-demo] 2025-09-13 11:41:34,952 - bookverse_core.api.middleware - INFO - üì§ Response: {'request_id': 'unknown', 'status_code': 200, 'duration_ms': 1.13}
INFO:     127.0.0.1:56778 - "GET /demo/pagination/items HTTP/1.1" 200 OK
[bookverse-core-demo] 2025-09-13 11:41:34,964 - bookverse_core.api.middleware - INFO - üì• Request: {'request_id': 'unknown', 'method': 'GET', 'url': 'http://localhost:8000/demo/middleware/demo', 'client_ip': '127.0.0.1', 'user_agent': 'curl/8.7.1'}
[bookverse-core-demo] 2025-09-13 11:41:34,965 - api.demo_endpoints - INFO - üîß Middleware demo endpoint accessed
[bookverse-core-demo] 2025-09-13 11:41:34,965 - bookverse_core.api.middleware - INFO - üì§ Response: {'request_id': 'unknown', 'status_code': 200, 'duration_ms': 0.77}
INFO:     127.0.0.1:56780 - "GET /demo/middleware/demo HTTP/1.1" 200 OK
[bookverse-core-demo] 2025-09-13 11:41:34,978 - bookverse_core.api.middleware - INFO - üì• Request: {'request_id': 'unknown', 'method': 'GET', 'url': 'http://localhost:8000/demo/responses/demo', 'client_ip': '127.0.0.1', 'user_agent': 'curl/8.7.1'}
[bookverse-core-demo] 2025-09-13 11:41:34,978 - api.demo_endpoints - INFO - üìã Response patterns demo accessed
[bookverse-core-demo] 2025-09-13 11:41:34,979 - bookverse_core.api.middleware - INFO - üì§ Response: {'request_id': 'unknown', 'status_code': 200, 'duration_ms': 1.02}
INFO:     127.0.0.1:56782 - "GET /demo/responses/demo HTTP/1.1" 200 OK
[bookverse-core-demo] 2025-09-13 11:41:34,992 - bookverse_core.api.middleware - INFO - üì• Request: {'request_id': 'unknown', 'method': 'GET', 'url': 'http://localhost:8000/demo/health/detailed', 'client_ip': '127.0.0.1', 'user_agent': 'curl/8.7.1'}
[bookverse-core-demo] 2025-09-13 11:41:34,992 - api.demo_endpoints - INFO - üè• Detailed health check demo accessed
[bookverse-core-demo] 2025-09-13 11:41:34,995 - bookverse_core.auth.oidc - ERROR - ‚ùå Failed to fetch OIDC configuration: HTTPSConnectionPool(host='dev-auth.bookverse.com', port=443): Max retries exceeded with url: /.well-known/openid_configuration (Caused by NameResolutionError("<urllib3.connection.HTTPSConnection object at 0x123c9e820>: Failed to resolve 'dev-auth.bookverse.com' ([Errno 8] nodename nor servname provided, or not known)"))
[bookverse-core-demo] 2025-09-13 11:41:34,995 - bookverse_core.auth.health - ERROR - ‚ùå Authentication connectivity check failed: 503: Authentication service unavailable
[bookverse-core-demo] 2025-09-13 11:41:34,996 - bookverse_core.api.middleware - INFO - üì§ Response: {'request_id': 'unknown', 'status_code': 200, 'duration_ms': 3.63}
INFO:     127.0.0.1:56784 - "GET /demo/health/detailed HTTP/1.1" 200 OK
[bookverse-core-demo] 2025-09-13 11:41:35,011 - bookverse_core.api.middleware - INFO - üì• Request: {'request_id': 'unknown', 'method': 'GET', 'url': 'http://localhost:8000/demo/auth/protected', 'client_ip': '127.0.0.1', 'user_agent': 'curl/8.7.1'}
[bookverse-core-demo] 2025-09-13 11:41:35,012 - bookverse_core.api.middleware - WARNING - ‚ö†Ô∏è Response: {'request_id': 'unknown', 'status_code': 401, 'duration_ms': 0.75}
INFO:     127.0.0.1:56786 - "GET /demo/auth/protected HTTP/1.1" 401 Unauthorized
INFO:     Shutting down
INFO:     Waiting for application shutdown.
[bookverse-core-demo] 2025-09-13 11:41:35,175 - bookverse_core.api.app_factory - INFO - üõë Shutting down BookVerse Core Demo Service
INFO:     Application shutdown complete.
INFO:     Finished server process [64304]
INFO:     Stopping reloader process [64270]
=== UNIT TEST RESULTS ===

============================= test session starts ==============================
platform darwin -- Python 3.9.6, pytest-8.3.2, pluggy-1.6.0 -- /Library/Developer/CommandLineTools/usr/bin/python3
cachedir: .pytest_cache
rootdir: /Users/yonatanp/playground/AppTrust-BookVerse/bookverse-demo/bookverse-core
configfile: pytest.ini
plugins: asyncio-1.2.0, anyio-4.10.0, cov-6.2.1
asyncio: mode=strict, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 1 item

tests/unit/test_config.py::TestBaseConfig::test_base_config_defaults PASSED [100%]

=============================== warnings summary ===============================
../../../../Library/Python/3.9/lib/python/site-packages/urllib3/__init__.py:35
  /Users/yonatanp/Library/Python/3.9/lib/python/site-packages/urllib3/__init__.py:35: NotOpenSSLWarning: urllib3 v2 only supports OpenSSL 1.1.1+, currently the 'ssl' module is compiled with 'LibreSSL 2.8.3'. See: https://github.com/urllib3/urllib3/issues/3020
    warnings.warn(

../../../../Library/Python/3.9/lib/python/site-packages/pydantic/_internal/_config.py:268
  /Users/yonatanp/Library/Python/3.9/lib/python/site-packages/pydantic/_internal/_config.py:268: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/
    warnings.warn(DEPRECATION_MESSAGE, DeprecationWarning)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
======================== 1 passed, 2 warnings in 0.02s =========================

=== DOCKER BUILD TEST ===
Testing Docker build...
‚úÖ Docker build: SUCCESS

=== PACKAGE INSTALLATION TEST ===
‚úÖ Package installation: SUCCESS

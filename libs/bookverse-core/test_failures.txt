tests/unit/test_api.py::TestAppFactory::test_create_app_with_auth FAILED [ 30%]
tests/unit/test_api.py::TestAppFactory::test_create_app_with_cors FAILED [ 32%]
tests/unit/test_api.py::TestAppFactory::test_create_app_logging_setup FAILED [ 36%]
tests/unit/test_api.py::TestMiddleware::test_error_handling_middleware FAILED [ 46%]
tests/unit/test_auth.py::TestAuthUser::test_auth_user_creation FAILED    [ 51%]
tests/unit/test_auth.py::TestAuthUser::test_auth_user_has_role FAILED    [ 53%]
tests/unit/test_auth.py::TestAuthUser::test_auth_user_has_scope FAILED   [ 55%]
tests/unit/test_auth.py::TestJWTValidation::test_validate_jwt_token_success FAILED [ 57%]
tests/unit/test_auth.py::TestJWTValidation::test_validate_jwt_token_invalid FAILED [ 59%]
tests/unit/test_auth.py::TestJWTValidation::test_validate_jwt_token_missing_claims FAILED [ 61%]
tests/unit/test_auth.py::TestOIDCIntegration::test_get_oidc_configuration_success FAILED [ 63%]
tests/unit/test_auth.py::TestOIDCIntegration::test_get_jwks_success FAILED [ 67%]
tests/unit/test_auth.py::TestAuthDependencies::test_get_current_user_with_valid_token ERROR [ 69%]
tests/unit/test_auth.py::TestAuthDependencies::test_get_current_user_no_token FAILED [ 71%]
tests/unit/test_auth.py::TestAuthDependencies::test_require_authentication_success ERROR [ 73%]
tests/unit/test_auth.py::TestAuthDependencies::test_require_authentication_failure FAILED [ 75%]
tests/unit/test_auth.py::TestAuthDependencies::test_require_scope_success ERROR [ 77%]
tests/unit/test_auth.py::TestAuthDependencies::test_require_scope_failure ERROR [ 79%]
tests/unit/test_auth.py::TestAuthDependencies::test_require_role_success ERROR [ 81%]
tests/unit/test_auth.py::TestAuthDependencies::test_require_role_failure ERROR [ 83%]
tests/unit/test_auth.py::TestAuthHealth::test_get_auth_status_enabled FAILED [ 85%]
tests/unit/test_auth.py::TestAuthHealth::test_get_auth_status_disabled FAILED [ 87%]
==================================== ERRORS ====================================
_ ERROR at setup of TestAuthDependencies.test_get_current_user_with_valid_token _
E   TypeError: __init__() got an unexpected keyword argument 'user_id'
__ ERROR at setup of TestAuthDependencies.test_require_authentication_success __
E   TypeError: __init__() got an unexpected keyword argument 'user_id'
______ ERROR at setup of TestAuthDependencies.test_require_scope_success _______
E   TypeError: __init__() got an unexpected keyword argument 'user_id'
______ ERROR at setup of TestAuthDependencies.test_require_scope_failure _______
E   TypeError: __init__() got an unexpected keyword argument 'user_id'
_______ ERROR at setup of TestAuthDependencies.test_require_role_success _______
E   TypeError: __init__() got an unexpected keyword argument 'user_id'
_______ ERROR at setup of TestAuthDependencies.test_require_role_failure _______
E   TypeError: __init__() got an unexpected keyword argument 'user_id'
    assert any("JWTAuth" in name for name in middleware_names)
E   assert False
    assert any("CORS" in name for name in middleware_names)
E   assert False
    raise AttributeError(
E   AttributeError: <module 'bookverse_core.api.app_factory' from '/Users/yonatanp/playground/AppTrust-BookVerse/bookverse-demo/bookverse-core/bookverse_core/api/app_factory.py'> does not have the attribute 'setup_logging'
    |     raise TypeError(f'Object of type {o.__class__.__name__} '
    | TypeError: Object of type datetime is not JSON serializable
    raise TypeError(f'Object of type {o.__class__.__name__} '
E   TypeError: Object of type datetime is not JSON serializable
ERROR    bookverse_core.api.middleware:middleware.py:222 ‚ùå Unhandled exception in request unknown: ValueError: Test error
E   TypeError: __init__() got an unexpected keyword argument 'user_id'
E   TypeError: __init__() got an unexpected keyword argument 'user_id'
E   TypeError: __init__() got an unexpected keyword argument 'user_id'
E   TypeError: validate_jwt_token() takes 1 positional argument but 3 were given
E   TypeError: validate_jwt_token() takes 1 positional argument but 3 were given
E   TypeError: validate_jwt_token() takes 1 positional argument but 3 were given
E   TypeError: get_oidc_configuration() takes 0 positional arguments but 1 was given
E   TypeError: get_jwks() takes 0 positional arguments but 1 was given
    assert user is None
E   assert <coroutine object get_current_user at 0x111318640> is None
FAILED tests/unit/test_api.py::TestAppFactory::test_create_app_with_auth - as...
FAILED tests/unit/test_api.py::TestAppFactory::test_create_app_with_cors - as...
FAILED tests/unit/test_api.py::TestAppFactory::test_create_app_logging_setup
FAILED tests/unit/test_api.py::TestMiddleware::test_error_handling_middleware
FAILED tests/unit/test_auth.py::TestAuthUser::test_auth_user_creation - TypeE...
FAILED tests/unit/test_auth.py::TestAuthUser::test_auth_user_has_role - TypeE...
FAILED tests/unit/test_auth.py::TestAuthUser::test_auth_user_has_scope - Type...
FAILED tests/unit/test_auth.py::TestJWTValidation::test_validate_jwt_token_success
FAILED tests/unit/test_auth.py::TestJWTValidation::test_validate_jwt_token_invalid
FAILED tests/unit/test_auth.py::TestJWTValidation::test_validate_jwt_token_missing_claims
FAILED tests/unit/test_auth.py::TestOIDCIntegration::test_get_oidc_configuration_success
FAILED tests/unit/test_auth.py::TestOIDCIntegration::test_get_jwks_success - ...
FAILED tests/unit/test_auth.py::TestAuthDependencies::test_get_current_user_no_token
FAILED tests/unit/test_auth.py::TestAuthDependencies::test_require_authentication_failure
FAILED tests/unit/test_auth.py::TestAuthHealth::test_get_auth_status_enabled
FAILED tests/unit/test_auth.py::TestAuthHealth::test_get_auth_status_disabled
ERROR tests/unit/test_auth.py::TestAuthDependencies::test_get_current_user_with_valid_token
ERROR tests/unit/test_auth.py::TestAuthDependencies::test_require_authentication_success
ERROR tests/unit/test_auth.py::TestAuthDependencies::test_require_scope_success
ERROR tests/unit/test_auth.py::TestAuthDependencies::test_require_scope_failure
ERROR tests/unit/test_auth.py::TestAuthDependencies::test_require_role_success
ERROR tests/unit/test_auth.py::TestAuthDependencies::test_require_role_failure
